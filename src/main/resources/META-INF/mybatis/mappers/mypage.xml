<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sample.camping.dao.MypageDao">

	<select id="getJoningBoardsById" parameterType="string" resultType="joningBoard">
		select 
			joining_no no,
			joining_title title,
			joining_contents contents,
			joining_create_date createDate,
			user_id "user.id"
		from 
			camp_joining_boards
		where 
			user_id = #{userId}
	</select>
	
	<select id="getOpinionBoardById" parameterType="string" resultType="opinionBoard">
		select 
			opinion_no no,
			opinion_title title,
			opinion_contents contents,
			opinion_create_date createDate,
			user_id "user.id"
		from 
			camp_opinion_boards
		where 
			user_id = #{userId}
	</select>
	
	<select id="getReviewBoaedById" parameterType="string" resultType="reviewBoard">
		select
			review_no no,
			review_title title,
			review_contents contents,
			review_create_date createDate,
			user_id "user.id"
		from 
			camp_review_boards
		where 
			user_id = #{userId}
	</select>
	
	<select id="getFreeBoardById" parameterType="string" resultType="freeBoard">
		select 
			free_no no,
			free_title title,
			free_contents contents,
			free_create_date createDate,
			user_id "user.id"
		from 
			camp_free_boards
		where 
			user_id = #{userId}
	</select>
	
	<select id="getJoningBoardCommentById" parameterType="string" resultType="joningBoardComment">
		select 
			comment_no no,
			comment_contents contents,
			comment_create_date createDate,
			joining_no "joiningBoard.no",
			user_id "user.id"
		from 
			camp_joining_comments
		where 
			user_id = #{userId}
	</select>
	
	<select id="getOpinionBoardCommentById" parameterType="string" resultType="opinionComment">
		select
			comment_no no,
			comment_contents contents,
			comment_create_date createDate,
			opinion_no "opinionBoard.no",
			user_id "user.id"
		from 
			camp_opinion_comments
		where 
			user_id = #{userId}
	</select>
	
	<select id="getReviewBoardCommentById" parameterType="string" resultType="reviewBoardComment">
		select 
			comment_no no,
			comment_contents contents,
			comment_create_date createDate,
			review_no "reviewBoard.no",
			user_id "user.id"
		from
			camp_review_comments
		where 
			user_id = #{userId}
	</select>
	
	<select id="getFreeBoardCommentById" parameterType="string" resultType="freeBoardComment">
		select 
			comment_no no,
			comment_contents contents,
			comment_create_date createDate,
			free_no "freeBoard.no",
			user_id "user.id"
		from 
			camp_free_comments
		where 
			user_id = #{userId}
	</select>
	
	<select id="getAllCommentCount" parameterType="string" resultType="int">
		select(free.cn1 + joining.cn2 + opinion.cn3 + review.cn4) cnt
			from (
			        select count(*) cn1
			        from camp_free_comments
			        where user_id = #{value}
			    ) free,
			    (
			        select count(*) cn2
			        from camp_joining_comments
			        where user_id = #{value}
			    ) joining,
			    (
			        select count(*) cn3
			        from camp_opinion_comments
			        where user_id = #{value}
			    ) opinion,
			    (
			        select count(*) cn4
			        from camp_review_comments
			        where user_id = #{value}
			    ) review
	</select>
	
</mapper>